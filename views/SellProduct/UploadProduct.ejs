<!DOCTYPE html>
<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
    <title>Product Form</title>
</head>

<body>
    <!-- if message is set then show message in alert of bootstrap else show nothing -->
    <% if(typeof message !="undefined" && message){ %>
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <%= message.message %>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <% } %>


            <h2>Upload Product</h2>
            <!-- write a code for form has productTitle,category,subCategory,tag,location,dateOfPurchase,conditionRating,price,note,photos and submit button and submit button should be disabled until all the fields are filled. -->
            <form action="/uploadProduct" method="post">
                <div class="form-outline mb-4">
                    <label class="form-label" for="companyName">Product title: </label>
                    <input value="Compass" type="text" id="productTitle" name="productTitle" class="form-control"
                        required />
                </div>
                <div class="form-outline mb-4">
                    <label class="form-label" for="companyName">Category: </label>
                    <select name="category" id="category"></select>
                </div>

                <div class="form-outline mb-4">
                    <label class="form-label" for="companyName">Tag: </label>
                    <input value="hbfeh" type="text" id="tag" name="tag" class="form-control" required />
                </div>
                <div class="form-outline mb-4">
                    <label class="form-label" for="companyName">Location: </label>
                    <select name="location" id="location"></select>
                </div>
                <div class="form-outline mb-4">
                    <label class="form-label" for="companyName">Date when you buy: </label>
                    <input type="date" id="dateOfPurchase" name="dateOfPurchase" class="form-control" required />
                </div>
                <div class="form-outline mb-4">
                    <label class="form-label" for="companyName">Condition rating out of 5: </label>
                    <select name="conditionRating" id="conditionRating"></select>
                </div>
                <div class="form-outline mb-4">
                    <label class="form-label" for="companyName">Price: </label>
                    <input value="455" type="number" id="price" name="price" class="form-control" min="0" required />
                </div>
                <div class="form-outline mb-4">
                    <label class="form-label" for="companyName">Note: </label>
                    <textarea name="note" rows="4" cols="50"></textarea>
                </div>
                <div class="form-outline mb-4">
                    <label class="form-label" for="companyName">Photos: </label>
                    <input type="file" id="photos" name="photos[]" class="form-control" multiple required />
                </div>
                <div class="form-outline mb-4">
                    <input type="submit" value="Submit" class="btn btn-primary" />
                </div>
            </form>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
        $(document).ready(function() {
            fetch('/api/Categories')
                .then(response => response.json())
                .then(data => {
                    let categories=data.data.categories[0].product.category;
                    let locations=data.data.categories[0].product.location;
                    let conditionRatings=data.data.categories[0].product.condition;
                    // console.log(categories);
                    categories.forEach(category => {
                        $('#category').append(`<option value="${category}">${category}</option>`)
                    });
                    locations.forEach(location => {
                        $('#location').append(`<option value="${location}">${location}</option>`)
                    });
                    conditionRatings.forEach(conditionRating => {
                        $('#conditionRating').append(`<option value="${conditionRating}">${conditionRating}</option>`)
                    });
                })
        })
    </script>
</html>